<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Chia ti·ªÅn Grab Nh√≥m (ƒê·ªông)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 500px;
      margin: 40px auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 10px;
      background: #f9f9f9;
    }
    input, select {
      width: 100%;
      padding: 6px;
      margin: 4px 0 12px;
      border-radius: 5px;
      border: 1px solid #aaa;
    }
    button {
      padding: 10px 15px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
    }
    pre {
      background: #eef6ff;
      padding: 10px;
      border-radius: 5px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h2>Chia ti·ªÅn Grab nh√≥m</h2>

  <label>T·ªïng ti·ªÅn g·ªëc:</label>
  <input id="total" type="number" placeholder="Nh·∫≠p t·ªïng ti·ªÅn g·ªëc" />

  <label>T·ªïng khuy·∫øn m√£i:</label>
  <input id="discount" type="number" placeholder="C·ªông s·ªë m√†u xanh l√°" />

  <label>Ph√≠ kh√¥ng √°p d·ª•ng KM:</label>
  <input id="fees" type="number" placeholder="Ph√≠ d·ªãch v·ª•..." />

  <label>S·ªë ng∆∞·ªùi ƒë·∫∑t:</label>
  <select id="numPeople" onchange="renderInputs()">
    <option value="2">2 ng∆∞·ªùi</option>
    <option value="3" selected>3 ng∆∞·ªùi</option>
    <option value="4">4 ng∆∞·ªùi</option>
    <option value="5">5 ng∆∞·ªùi</option>
    <option value="6">6 ng∆∞·ªùi</option>
    <option value="7">7 ng∆∞·ªùi</option>
    <option value="8">8 ng∆∞·ªùi</option>
    <option value="9">9 ng∆∞·ªùi</option>
    <option value="10">10 ng∆∞·ªùi</option>
  </select>

  <div id="peopleInputs"></div>

  <button onclick="calc()">T√≠nh chia</button>

  <h3>K·∫øt qu·∫£:</h3>
  <pre id="result">Nh·∫≠p d·ªØ li·ªáu v√† b·∫•m T√≠nh chia</pre>

  <script>
    function renderInputs() {
      const num = +document.getElementById('numPeople').value;
      const container = document.getElementById('peopleInputs');
      container.innerHTML = '';
      for (let i = 1; i <= num; i++) {
        container.innerHTML += `
          <label>Ti·ªÅn ng∆∞·ªùi ${i} ƒë·∫∑t:</label>
          <input type="number" id="p${i}" />
        `;
      }
    }

    renderInputs(); // render ban ƒë·∫ßu

    function calc() {
      const total = +document.getElementById('total').value;
      const discount = +document.getElementById('discount').value;
      const fees = +document.getElementById('fees').value;
      const num = +document.getElementById('numPeople').value;

      const effectiveDiscount = discount - fees;
      const kmRate = effectiveDiscount / total;

      let output = '';
      let totalPaid = 0;

      for (let i = 1; i <= num; i++) {
        const amount = +document.getElementById(`p${i}`).value;
        const km = Math.round(amount * kmRate);
        const final = Math.round(amount - km);
        totalPaid += final;
        output += `üëâ Ng∆∞·ªùi ${i}: Tr·∫£ ${final} ƒë (Gi·∫£m ${km} ƒë)\n`;
      }

      output += `\nüí∞ T·ªïng thanh to√°n: ${totalPaid} ƒë`;
      document.getElementById('result').textContent = output;
    }
  </script>
</body>
</html>
